<html>
  <head>
    
  <link type="text/css" rel="stylesheet" href="stylesheet.css"/>
  <link rel="icon" href="siteResources/Fishy.png">
  <title>Hangman!</title>

  <script type="text/javascript" src="jquery2.min.js"></script>
 
  <script type='text/javascript'>

  $(document).ready(function() {
    $(".hangmanHide").hide()
    ///console.log("Hidding stuff now");
  });

  var choice;
  randomWord();

  function randomWord() {      
    var requestStr = 'http://randomword.setgetgo.com/get.php'

    $.ajax({
      type: "GET",
      url: requestStr,
      dataType: "jsonp",
      jsonpCallback: "randomWordComplete",   
    });
    randomWordComplete();
  };

  function randomWordComplete(data) {        
        rawData = data.Word;
        choice = rawData.toLowerCase();
        ///console.log("this is choice " + choice);
        $(function(){
          viewLetters();
          hideHangMan();
          findLength();
          
          $('.clickableLetter').click(findLetter)
          $('.clickableLetter').click(loserWin)
        });
  };
  ///console.log("this is choice outside the funtion " + choice);  

  
  var letters = 'abcdefghijklmnopqrstuvwxyz'
  var wrongLetterArray = new Array();
  var Word;
  var l = 0;
  var w = 0;
  var guessesLeft = 7;
  var playerChoice;

  function hideHangMan(){
    for (var hang = 1; hang < 8; ++hang){
      $("#"+hang.toString()).hide('')
    }
  };

  function findLength(){
    
      for (var i = 0; i < choice.length; ++i){
        var thisLetter = choice[i]
        var realWord = $("<span></span>")
        .addClass(thisLetter).append("_ ")
        $('#underscore').append(realWord)
    }
  };

  function viewLetters(){
    for (var letterIteration = 0; letterIteration < letters.length; ++letterIteration){
      currentLetter = letters[letterIteration];
      $('#displayLetters').append($('<a href="#"></a>').addClass(currentLetter).addClass('clickableLetter').append(currentLetter + ' '))
    }
  };

  function findLetter(){
    var letterClicked = $(this).text().trim()
    $(this).hide('')
    var poss = choice.match(letterClicked);  
    wrongLetterArray[l] = " " + letterClicked.toUpperCase();
      
    
    
    if (poss){ 
      
      $("#underscore ."+letterClicked).html(letterClicked)
      ///console.log(poss)
      $("#guesses").html('Total guesses = '+((++w) + l).toString())
      ///alert(true);
      return true;
    }

    else{
      
      $('#allBadGuesses').html("Wrong Guesses = "+wrongLetterArray)
      $('#lastGuesses').html('Last guess = '+letterClicked.toString())
      $("#guesses").html("Total guesses = "+((++l) + w).toString())
      $('#'+l.toString()).show()
      $('#'+(l-1).toString()).hide()
      ///console.log("l1 is = "+l);
      $("#guesses2").html('Guesses Left = '+(--guessesLeft))
      ///alert("You're Wrong");
    }
    ///console.log("this is l2 "+l)
    ///console.log('w = '+w)
  };

  function loserWin(){
    if (l === 7){
      $('#underscore').html(choice)
      playerChoice = confirm("You lost :( Would you like to play again?");
      playAgain();
    } 
    else if (choice === $("#underscore").text()){
      playerChoice = confirm("You won! Would you like to play again?");
      playAgain();
    }
  };

  var playAgain = (function(){
    if (playerChoice === true){
      window.location.reload()
    }
    else{
      $(".clickableLetter").hide();
      $('#7').hide();

    }
  });
  
 
  function reset(){
    playerChoice = confirm("Would you like to start a new game?");
    playAgain();
    $(".clickableLetter").show();
  };
  

  </script>



  </head>
<body>

  <div id="header">
        <p id="title">Hang Man</p>
    <a id="email" href="mailto:sam@fishy.ninja">sam@fishy.ninja</a>
        
  </div>     
    
  <div id="navBar"> 
    <a id="links" href="home.html">About Me</a>
    <a id="links" href="hangman.html"> Hang Man</a>
    <a id="links" href="russian_roulette.html"> Russian Roulette</a>
    <a id="links" href="clicker.html"> Clicker Counter</a>
    <a id="links" href="short_stories.html">Short Stories</a>
    <a id="links" href="wordlookup.html">Word lookup</a>    
  </div>
   <div id='lettersClick'></div>
   <div id='displayLetters'></div>
   
  <pre id= '0'>
     =O==========+    
                ||    
                ||    
                ||    
                ||    
                ||    
                ||    
                ||    
                ||    
  ================] </pre>
  <pre id= '1' class= "hangmanHide">
     =O==========+    
      |         ||    
                ||    
                ||    
                ||    
                ||    
                ||    
                ||    
                ||    
  ================] </pre>
  <pre id= '2' class= "hangmanHide">
     =O==========+    
      |         ||    
      |         ||    
                ||    
                ||    
                ||    
                ||    
                ||    
                ||    
  ================] </pre>
  <pre id= '3' class= "hangmanHide">
     =O==========+    
      |         ||    
      |         ||    
      |         ||    
                ||    
                ||    
                ||    
                ||    
                ||    
  ================] </pre>
  <pre id= '4' class= "hangmanHide">
     =O==========+    
      |         ||    
      |         ||    
      |         ||    
     (_)        ||    
                ||    
                ||    
                ||    
                ||    
  ================] </pre>
  <pre id= '5' class= "hangmanHide">
     =O==========+    
      |         ||    
      |         ||    
      |         ||    
     (_)        ||    
     /T\        ||    
                ||    
                ||    
                ||    
  ================] </pre>
  <pre id= '6' class= "hangmanHide">
     =O==========+    
      |         ||    
      |         ||    
      |         ||    
     (_)        ||    
     /T\        ||    
      M         ||    
                ||    
                ||    
  ================] </pre>
  <pre id= '7' class= "hangmanHide">
     =O==========+    
      |         ||    
      |         ||    
      |         ||    
     (_)        ||    
     /T\        ||    
      M         ||    
     J L        ||    
                ||    
  ================]</pre>
  <div id='underscore'></div>
  <div id="newGame">
    <button type="reset" id="newGameText" onclick="reset();">New Game</button>
  </div>
  <div id="box">
    <div class="box" id='guesses'></div>
    <div class="box" id='guesses2'></div>
    <div class="box" id="lastGuesses"></div>
    <div class="box" id='allBadGuesses'></div>
  </div>
  
</body>
</html>